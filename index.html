<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>IFC.js Viewer</title>
<script type="module">
  import { IfcViewerAPI } from "https://unpkg.com/web-ifc-viewer@0.0.95/dist/ifc-viewer-api.js";

  const container = document.getElementById("viewer-container");
  const viewer = new IfcViewerAPI({ container, backgroundColor: new Color(0xffffff) });

  // Adiciona o grid e as eixos
  viewer.grid.setGrid();
  viewer.axes.setAxes();

  // Carrega o arquivo IFC
  async function loadIfc() {
    const ifcURL = "https://space-duall.sfo3.cdn.digitaloceanspaces.com/RenanMeyer/HID-TIPO.ifc";
    const model = await viewer.IFC.loadIfcUrl(ifcURL);
    console.log("âœ… Modelo carregado!");

    // Acessa as propriedades de um item ao clicar
    window.onmousemove = (event) => viewer.IFC.selector.prePickIfcItem();
    window.onclick = async () => {
      const result = await viewer.IFC.selector.pickIfcItem();
      if (result) {
        const props = await viewer.IFC.getProperties(result.modelID, result.id, true, false);
        document.getElementById("props").innerText = JSON.stringify(props, null, 2);
      }
    };
  }

  loadIfc();
</script>
<style>
  html, body { margin: 0; height: 100%; }
  #viewer-container { width: 100vw; height: 100vh; }
  #props { position: fixed; top: 0; right: 0; width: 300px; height: 100%; overflow: auto; background: #fff; padding: 10px; border-left: 1px solid #ccc; }
</style>
</head>
<body>
  <div id="viewer-container"></div>
  <div id="props"><h4>Propriedades IFC</h4></div>
</body>
</html>
